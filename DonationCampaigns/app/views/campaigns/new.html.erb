<% provide(:title, "New Campaign") %>

<div class="container">
  <div class="row topspace-lg">
    <div class="col-md-6 col-md-offset-3">
      <h1 class="text-center">Create a campaign</h1>
      <div class="topspace-lg">
        <%= render 'layouts/messages' %>
        <div class="panel panel-default topspace shadow-sm">
          <div class="panel-body">
            <%= form_for(@campaign) do |f| %>
            	<%= render 'shared/error_messages', object: f.object %>
            	<%= f.label :name %>
            	<%= f.text_field :name, class: 'form-control' %>
            	<%= f.label :description %>
            	<%= f.text_field :description, class: 'form-control' %>
            	<%= f.label :goal, "Goal ($100 - $10,000)" %>
                <div class="input-group">
                  <span class="input-group-addon">$</span>
                  <%= f.text_field :goal, class: "form-control input-lg", placeholder: "0.00", value: @campaign.goal || @goal %>
                </div>
                <br>
              <div class="input-group">
                <%= f.file_field :picture, accept: 'image/jpeg,image/gif,image/png', class: 'form-control' %>
              </div>
              <br>  
            	<%= f.submit "Create my campaign", class: "btn btn-primary" %>
            	<% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!--I'm honestly not sure if this JQuery code actually works here.  
  I got it from the RailsTutorial by Michael Hartl. -->
<script type="text/javascript">
  $('#micropost_picture').bind('change', function() {
    var size_in_megabytes = this.files[0].size/1024/1024;
    if (size_in_megabytes > 5) {
      alert('Maximum file size is 5MB. Please choose a smaller file.');
    }
  });
</script>